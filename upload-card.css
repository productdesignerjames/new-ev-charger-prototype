/* Base tokens */
:root{
  --ph-bg:#edf5fc;
  --ph-white:#fff;
  --ph-blue:#004ecc;
  --ph-blue-mid:#0b63d9;
  --ph-border:#004ecc;
  --ph-muted:#3f5d73;
  --ph-warn:#ff8b00;
  --ph-error:#d32626;
  --ph-success:#0d7d32;
  --ph-success-bg:#e7f9ef;
  --ph-warn-bg:#fff4e2;
  --ph-error-bg:#ffe9e9;
  --ph-ring:#0d78ff;
  --ph-ring-track:#c9d9ea;
  --ph-radius:18px;
  --ph-speed:.22s;
  --ph-max:1180px;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

body.ph{margin:0;background:var(--ph-bg);color:#0d2f4d;-webkit-font-smoothing:antialiased;}
.ph-hero{max-width:var(--ph-max);margin:0 auto;padding:48px 32px 14px;}
.ph-hero h1{margin:0 0 18px;font-size:1.9rem;line-height:1.15;color:var(--ph-blue);}
.ph-intro{margin:0 0 10px;font-size:.85rem;line-height:1.35;max-width:70ch;}
.ph-note{margin:0;font-size:.62rem;font-weight:600;letter-spacing:.35px;text-transform:uppercase;color:#22435d;}

.ph-main{max-width:var(--ph-max);margin:0 auto;padding:0 32px 120px;}
.ph-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:32px;}
.ph-card{display:flex;gap:44px;background:var(--ph-white);padding:34px 40px 30px;border-radius:var(--ph-radius);border:1px solid #e2edf5;box-shadow:0 2px 4px rgba(8,37,62,.05),0 12px 38px -14px rgba(8,37,62,.18);position:relative;}
.ph-media{width:180px;flex:0 0 180px;display:flex;flex-direction:column;align-items:center;gap:10px;}
.ph-box{all:unset;display:block;width:180px;border:2px dashed var(--ph-border);border-radius:16px;background:#f5fbff;cursor:pointer;transition:background .2s,border-color .2s;position:relative;padding:20px 0;}
.ph-box:hover{background:#e9f3ff;}
.ph-box-inner{height:118px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;}
.ph-illus{max-width:92%;max-height:100%;object-fit:contain;opacity:.95;transition:opacity .25s;}
.ph-box:hover .ph-illus{opacity:.8;}
.ph-preview{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:none;}
.ph-box.has-image .ph-preview{display:block;}
.ph-box.has-image .ph-illus{display:none;}
.ph-remove{position:absolute;top:4px;right:4px;width:30px;height:30px;background:rgba(0,0,0,.55);color:#fff;border:0;border-radius:8px;font-size:18px;font-weight:600;display:none;cursor:pointer;}
.ph-box.has-image .ph-remove{display:inline-flex;align-items:center;justify-content:center;}
.ph-remove:hover{background:rgba(0,0,0,.72);}

.ph-status{font-size:.6rem;font-weight:600;min-height:.9em;color:#20506b;text-align:center;}

.ph-actions{display:flex;gap:12px;align-items:center;justify-content:center;}
.circle-btn{--size:46px;width:var(--size);height:var(--size);border-radius:50%;border:2px solid var(--ph-blue);background:#fff;color:var(--ph-blue);display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s,color .2s,border-color .2s;padding:0;}
.circle-btn svg{width:62%;height:62%;}
.circle-btn--upload:hover{background:var(--ph-blue);color:#fff;}
.circle-btn--camera{border-color:#008bff;color:#008bff;display:none;}
.circle-btn--camera:hover{background:#008bff;color:#fff;}
html.has-capture .circle-btn--camera{display:none;}
@media (pointer:coarse),(max-width:820px){html.has-capture .circle-btn--camera{display:inline-flex;}}

.ph-label{font-size:.62rem;font-weight:600;letter-spacing:.38px;color:var(--ph-blue);text-align:center;}

.ph-body{flex:1 1 auto;display:flex;flex-direction:column;gap:8px;min-width:0;}
.ph-meta{display:flex;justify-content:space-between;align-items:flex-start;gap:14px;min-height:20px;}
.badge{font-size:.55rem;font-weight:600;letter-spacing:.33px;padding:6px 10px 5px;border-radius:999px;background:#eaf3ff;color:var(--ph-blue);border:1px solid #c6dff3;white-space:nowrap;}
.badge-required{background:#fff5ea;color:var(--ph-warn);border-color:#ffdcb9;}
.badge-optional{background:#e9f3ff;color:#0a63d1;border-color:#c7e3ff;}
.step{font-size:.72rem;font-weight:600;color:var(--ph-blue);min-width:44px;text-align:right;}
.ph-title{margin:0;font-size:1rem;font-weight:600;line-height:1.2;color:#0f324d;}
.ph-desc{margin:0;font-size:.7rem;line-height:1.35;color:var(--ph-muted);max-width:560px;}

.submit-wrap{margin-top:48px;}
.primary-submit{background:var(--ph-blue);color:#fff;border:0;border-radius:6px;padding:12px 18px;font-size:.75rem;font-weight:600;letter-spacing:.35px;display:inline-flex;align-items:center;gap:8px;cursor:pointer;transition:background .2s,opacity .2s;}
.primary-submit:disabled{opacity:.45;cursor:default;}
.primary-submit:not(:disabled):hover{background:var(--ph-blue-mid);}

/* Overlay & STATES (attribute driven) */
.ph-overlay{position:absolute;inset:0;display:grid;place-items:center;font-size:.65rem;font-weight:600;color:var(--ph-blue);pointer-events:none;}
/* Hide ALL dynamic elements by default (prevents multiple showing) */
.ph-overlay .ph-progress,
.ph-overlay .ph-analyse,
.ph-overlay .ph-icon{display:none !important;}

.ph-progress{flex-direction:column;align-items:center;gap:6px;}
.ph-progress .ring{width:54px;height:54px;}
.ph-progress .track{fill:none;stroke:var(--ph-ring-track);stroke-width:4;}
.ph-progress .bar{fill:none;stroke:var(--ph-ring);stroke-width:4;stroke-linecap:round;stroke-dasharray:125.6;stroke-dashoffset:125.6;transition:stroke-dashoffset .25s linear;}
.ph-progress .pct{font-size:.58rem;letter-spacing:.35px;color:#0b5c90;}
.ph-analyse{flex-direction:column;align-items:center;gap:6px;color:#fff;}
.ph-analyse svg{width:42px;height:42px;}
.ph-analyse span{font-size:.52rem;letter-spacing:.35px;text-transform:uppercase;}
.ph-icon{align-items:center;justify-content:center;font-weight:700;}
.ph-icon--success svg{width:50px;height:50px;color:var(--ph-success);}
.ph-icon--warning,
.ph-icon--error{width:48px;height:48px;border-radius:50%;display:flex;font-size:1.4rem;line-height:1;}
.ph-icon--warning{background:var(--ph-warn);color:#fff;}
.ph-icon--error{background:var(--ph-error);color:#fff;}

/* State visuals */
.ph-box[data-state="uploading"] .ph-progress{display:flex !important;}
.ph-box[data-state="analysing"] .ph-analyse{display:flex !important;}
.ph-box[data-state="success"]   .ph-icon--success{display:flex !important;}
.ph-box[data-state="warning"]   .ph-icon--warning{display:flex !important;}
.ph-box[data-state="error"]     .ph-icon--error{display:flex !important;}

.ph-box[data-state="uploading"] .ph-illus,
.ph-box[data-state="uploading"] .ph-preview{opacity:.3;}
.ph-box[data-state="analysing"]{background:#003d99;border-color:#003d99;}
.ph-box[data-state="analysing"] .ph-preview,
.ph-box[data-state="analysing"] .ph-illus{filter:blur(1.1px) brightness(.82);}
.ph-box[data-state="success"]{background:var(--ph-success-bg);border-color:var(--ph-success);box-shadow:0 0 0 2px var(--ph-success) inset;}
.ph-box[data-state="warning"]{background:var(--ph-warn-bg);border-color:var(--ph-warn);box-shadow:0 0 0 2px var(--ph-warn) inset;}
.ph-box[data-state="error"]{background:var(--ph-error-bg);border-color:var(--ph-error);animation:shake .4s ease;}

@keyframes shake{20%{transform:translateX(-4px);}40%{transform:translateX(4px);}60%{transform:translateX(-3px);}80%{transform:translateX(3px);}100%{transform:none;}}

/* Mobile */
@media (max-width:820px){
  .ph-hero{padding:40px 20px 14px;}
  .ph-main{padding:0 20px 120px;}
  .ph-list{gap:28px;}
  .ph-card{flex-direction:column;gap:20px;padding:28px 24px 34px;}
  .ph-media{width:100%;align-items:flex-start;}
  .ph-box{width:100%;max-width:340px;}
  .ph-box-inner{height:150px;}
  .ph-actions{justify-content:flex-start;}
  .ph-desc{max-width:100%;}
  .circle-btn{--size:52px;}
  .ph-label{text-align:left;}
}

/* Focus */
button:focus-visible,
.ph-box:focus-visible,
.circle-btn:focus-visible,
.ph-remove:focus-visible{outline:2px solid #002f87;outline-offset:2px;}

@media (prefers-reduced-motion:reduce){
  .ph-illus{transition:none;}
}

.hidden{display:none !important;}